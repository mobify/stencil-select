// Select
// ===


// Configurable Variables
// ---

$select__height: if(variable-exists(forms__element-height), $forms__element-height, 50px) !default;
$select__v-space: if(variable-exists(v-space), $v-space, 0.5rem) !default;
$select__h-space: if(variable-exists(h-space), $h-space, 1rem) !default;
$select__padding: if(variable-exists(forms__element-padding), $forms__element-padding, 10px 15px) !default;

$select__border-color: if(variable-exists(border-color), $border-color, hsl(0, 0%, 10%)) !default;
$select__border: if(variable-exists(border), $border, 1px solid $select__border-color) !default;
$select__border-radius: if(variable-exists(form-border-radius), $form-border-radius, 0) !default;

$select__background-color: if(variable-exists(forms__background-color), $forms__background-color, #fff) !default;
$select__triangle-size: 7px !default;
$select__triangle-position: $select__h-space;

$select__font-family: if(variable-exists(form-font-family), $form-font-family, inherit) !default;
$select__font-size: if(variable-exists(form-font-size), $form-font-size, inherit) !default;
$select__text-indent: $forms__select-text-indent;

// Select Root
// ---
//
// 1. Absolutely position select element and triangle relative to the parent .c-select
// 2. Vertical center the triangle
// 3. Align select text with input text

.c-select {
    position: relative; // 1

    display: flex;
    overflow: hidden;
    align-items: center;
    box-sizing: border-box;
    max-width: 100%;
    height: $select__height;

    border: $select__border;
    padding: $select__padding;

    border-radius: $select__border-radius;
    background: $select__background-color;

    font-family: $select__font-family;
    font-size: $select__font-size;

    -webkit-user-select: none;

    user-select: none;

    select {
        position: absolute; // 1
        top: 0;
        left: 0;

        width: 100%;
        height: 100%;
        padding: $select__padding;
        border: 0;

        background: none;

        -webkit-appearance: none;

        text-indent: $select__text-indent; // 3
    }

    // "Down" Triangle
    &::after {
        @include triangle(
            $type: 'triangle',
            $direction: 'down',
            $size: $select__triangle-size,
            $color: $select__border-color
        );

        content: '';

        position: absolute; // 1, 2
        top: 0; // 2,
        right: $select__triangle-position;
        bottom: 0; // 2

        margin: auto; // 2
    }

    &.c--label {
        select {
            opacity: 0;
        }
    }
}

// Additonal Elements for option with Labels nested in Select
// ---
//
// 1. Align label with other form elements

.c-select__label {
    display: block;

    margin-right: $select__h-space;
    margin-bottom: 0;

    text-overflow: ellipsis;
    overflow: hidden;
    text-indent: $select__text-indent; // 1
}

.c-select__value {
    display: block;
    flex: 1;

    padding-right: $select__h-space; // padding for ellipsis
    overflow: hidden;

    white-space: nowrap;
    text-overflow: ellipsis;
}


// Platform Fixes
// ---

// Fix for Firefox
// Attribution: http://filamentgroup.github.io/select-css/
//
// Hide the native select arrow by clipping it with overflow: hidden
@-moz-document url-prefix() {
    .c-select {
        overflow: hidden;

        select {
            width: calc(100% + 3em);

            &:-moz-focusring {
              color: transparent;
              text-shadow: 0 0 0 #000;
            }
        }
    }
}
